
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SendGo Fast File Upload</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h2>SendGo Fast Uploader</h2>
        <input type="file" id="file-upload"><br>
        <textarea id="message-box" placeholder="Enter optional message"></textarea><br>
        <button onclick="uploadFile()">Get Link</button>
        <div id="link-section" style="display:none;">
            <input type="text" id="generated-link" readonly>
            <button onclick="copyLink()">Copy Link</button>
        </div>
    </div>

    <script>
    function uploadFile() {
        const file = document.getElementById('file-upload').files[0];
        const message = document.getElementById('message-box').value;
        if (!file) {
            alert('Please select a file');
            return;
        }

        fetch(`https://us-central1-continue-56506.cloudfunctions.net/getSignedUrl?filename=${file.name}&contentType=${file.type}`)
            .then(res => res.json())
            .then(data => {
                return fetch(data.url, {
                    method: "PUT",
                    headers: {
                        "Content-Type": file.type
                    },
                    body: file
                }).then(() => {
                    const fileUrl = `https://firebasestorage.googleapis.com/v0/b/continue-56506.appspot.com/o/${encodeURIComponent(file.name)}?alt=media`;
                    document.getElementById('generated-link').value = fileUrl;
                    document.getElementById('link-section').style.display = 'block';
                    console.log("File uploaded:", fileUrl);
                    alert('File uploaded successfully!');
                });
            }).catch(err => {
                console.error(err);
                alert('Upload failed');
            });
    }

    function copyLink() {
        const link = document.getElementById('generated-link');
        link.select();
        document.execCommand('copy');
        alert('Link copied to clipboard');
    }
    </script>
</body>
</html>
